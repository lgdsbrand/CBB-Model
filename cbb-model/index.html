<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CBB TeamRankings Model</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="top-header">
    <div>
      <h1>CBB TeamRankings Model</h1>
      <p class="subtitle">Division I projections using TeamRankings stats</p>
    </div>
    <div id="status" class="status">Loadingâ€¦</div>
  </header>

  <!-- Mode toggle -->
  <div class="mode-toggle">
    <button id="btnManual" class="mode-btn active">Manual Model</button>
    <button id="btnEspn" class="mode-btn">ESPN Daily Games</button>
  </div>

  <!-- Manual section -->
  <section id="manualSection" class="card-block">
    <h2>Manual Matchup</h2>
    <div class="form-grid">
      <div class="form-field">
        <label for="awayTeamInput">Away Team</label>
        <input
          list="teamList"
          id="awayTeamInput"
          type="text"
          placeholder="Type or pick a team"
        />
      </div>

      <div class="form-field">
        <label for="homeTeamInput">Home Team</label>
        <input
          list="teamList"
          id="homeTeamInput"
          type="text"
          placeholder="Type or pick a team"
        />
      </div>
    </div>

    <datalist id="teamList"></datalist>

    <div class="form-grid">
      <div class="form-field">
        <label for="bookSpread">Book Spread (Home)</label>
        <input
          id="bookSpread"
          type="number"
          step="0.5"
          placeholder="-7.5"
        />
      </div>

      <div class="form-field">
        <label for="bookTotal">Book Total</label>
        <input
          id="bookTotal"
          type="number"
          step="0.5"
          placeholder="145.5"
        />
      </div>
    </div>

    <div class="button-row">
      <button id="runBtn" class="primary" disabled>Run Model</button>
      <button id="saveBtn" class="secondary" disabled>Save Game</button>
    </div>

    <section id="results" class="results-card hidden">
      <h3>Result</h3>
      <div id="resultBody"></div>
    </section>

    <section class="saved-section">
      <div class="saved-header-row">
        <h3>Saved Games</h3>
        <div class="button-row compact">
          <button id="downloadBtn" class="secondary">Download CSV</button>
          <button id="undoBtn" class="secondary">Undo Last</button>
          <button id="clearBtn" class="secondary danger">Clear All</button>
        </div>
      </div>
      <div id="savedTableWrap" class="table-container"></div>
    </section>
  </section>

  <!-- ESPN / Sheet section -->
  <section id="espnSection" class="card-block hidden">
    <h2>Today&#39;s Games (ESPN &amp; TeamRankings)</h2>
    <p class="muted">
      Games are scraped to your <strong>CBB_Games</strong> sheet with Apps Script,
      then projected here using the same model.
    </p>
    <div class="button-row">
      <button id="reloadEspnBtn" class="primary">Reload Today&#39;s Games</button>
    </div>

    <div id="dailyCards" class="cards-container">
      <!-- Cards injected by app.js -->
    </div>
  </section>

  <footer class="footer">
    <span class="muted">Powered by TeamRankings stats &amp; ESPN schedule</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
